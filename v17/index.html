<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="ie=edge"/><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"/><style id="typography.js">html{font-family:sans-serif;-ms-text-size-adjust:100%;-webkit-text-size-adjust:100%}body{margin:0}article,aside,details,figcaption,figure,footer,header,main,menu,nav,section,summary{display:block}audio,canvas,progress,video{display:inline-block}audio:not([controls]){display:none;height:0}progress{vertical-align:baseline}[hidden],template{display:none}a{background-color:transparent;-webkit-text-decoration-skip:objects}a:active,a:hover{outline-width:0}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:inherit;font-weight:bolder}dfn{font-style:italic}h1{font-size:2em;margin:.67em 0}mark{background-color:#ff0;color:#000}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}svg:not(:root){overflow:hidden}code,kbd,pre,samp{font-family:monospace,monospace;font-size:1em}figure{margin:1em 40px}hr{box-sizing:content-box;height:0;overflow:visible}button,input,optgroup,select,textarea{font:inherit;margin:0}optgroup{font-weight:700}button,input{overflow:visible}button,select{text-transform:none}[type=reset],[type=submit],button,html [type=button]{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{border:1px solid silver;margin:0 2px;padding:.35em .625em .75em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-cancel-button,[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-input-placeholder{color:inherit;opacity:.54}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}html{font:100%/1.625 -apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';box-sizing:border-box;overflow-y:scroll;}*{box-sizing:inherit;}*:before{box-sizing:inherit;}*:after{box-sizing:inherit;}body{color:hsla(0,0%,0%,0.8);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:normal;word-wrap:break-word;font-kerning:normal;-moz-font-feature-settings:"kern", "liga", "clig", "calt";-ms-font-feature-settings:"kern", "liga", "clig", "calt";-webkit-font-feature-settings:"kern", "liga", "clig", "calt";font-feature-settings:"kern", "liga", "clig", "calt";}img{max-width:100%;margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}h1{margin-left:0;margin-right:0;margin-top:2.4375rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:1.21875rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:2rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h2{margin-left:0;margin-right:0;margin-top:1.625rem;padding-bottom:calc(0.40625rem - 1px);padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.40625rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.51572rem;line-height:1.1;border-bottom:1px solid hsla(0,0%,0%,0.07);}h3{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1.31951rem;line-height:1.1;}h4{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:1rem;line-height:1.1;}h5{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:inherit;font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.87055rem;line-height:1.1;}h6{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;color:hsla(0,0%,0%,0.53);font-family:-apple-system,'BlinkMacSystemFont','Segoe UI','Roboto','Helvetica','Arial',sans-serif,'Apple Color Emoji','Segoe UI Emoji','Segoe UI Symbol';font-weight:600;text-rendering:optimizeLegibility;font-size:0.81225rem;line-height:1.1;}hgroup{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}ul{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}ol{margin-left:1.625rem;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;list-style-position:outside;list-style-image:none;}dl{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}dd{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}p{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}figure{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}pre{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:0.85rem;line-height:1.625rem;}table{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;font-size:1rem;line-height:1.625rem;border-collapse:collapse;width:100%;}fieldset{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}blockquote{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:calc(0.8125rem - 1px);padding-right:0;padding-top:0;margin-bottom:0.8125rem;border-left:4px solid hsla(0,0%,0%,0.13);color:hsla(0,0%,0%,0.53);}form{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}noscript{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}iframe{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}hr{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:calc(0.8125rem - 1px);background:hsla(0,0%,0%,0.2);border:none;height:1px;}address{margin-left:0;margin-right:0;margin-top:0;padding-bottom:0;padding-left:0;padding-right:0;padding-top:0;margin-bottom:0.8125rem;}b{font-weight:600;}strong{font-weight:600;}dt{font-weight:600;}th{font-weight:600;}li{margin-bottom:calc(0.8125rem / 2);}ol li{padding-left:0;}ul li{padding-left:0;}li > ol{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}li > ul{margin-left:1.625rem;margin-bottom:calc(0.8125rem / 2);margin-top:calc(0.8125rem / 2);}blockquote *:last-child{margin-bottom:0;}li *:last-child{margin-bottom:0;}p *:last-child{margin-bottom:0;}li > p{margin-bottom:calc(0.8125rem / 2);}code{font-size:0.85rem;line-height:1.625rem;}kbd{font-size:0.85rem;line-height:1.625rem;}samp{font-size:0.85rem;line-height:1.625rem;}abbr{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}acronym{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;}abbr[title]{border-bottom:1px dotted hsla(0,0%,0%,0.5);cursor:help;text-decoration:none;}thead{text-align:left;}td,th{text-align:left;border-bottom:1px solid hsla(0,0%,0%,0.12);font-feature-settings:"tnum";-moz-font-feature-settings:"tnum";-ms-font-feature-settings:"tnum";-webkit-font-feature-settings:"tnum";padding-left:1.08333rem;padding-right:1.08333rem;padding-top:0.8125rem;padding-bottom:calc(0.8125rem - 1px);}th:first-child,td:first-child{padding-left:0;}th:last-child,td:last-child{padding-right:0;}h3,h4,h5,h6{margin-bottom:0.8125rem;margin-top:1.625rem;}ol,ul{margin-left:2.03125rem;}li>ol,li>ul{margin-left:2.03125rem;}a{color:#4078c0;text-decoration:none;}a:hover,a:active{text-decoration:underline;}</style><style data-href="/rest.js/styles.04e70e3c992d08df442a.css">code[class*=language-],pre[class*=language-]{color:#f8f8f2;background:none;text-shadow:0 1px rgba(0,0,0,.3);font-family:Consolas,Monaco,Andale Mono,Ubuntu Mono,monospace;font-size:1em;text-align:left;white-space:pre;word-spacing:normal;word-break:normal;word-wrap:normal;line-height:1.5;-moz-tab-size:4;-o-tab-size:4;tab-size:4;-webkit-hyphens:none;-ms-hyphens:none;hyphens:none}pre[class*=language-]{padding:1em;margin:.5em 0;overflow:auto;border-radius:.3em}:not(pre)>code[class*=language-],pre[class*=language-]{background:#272822}:not(pre)>code[class*=language-]{padding:.1em;border-radius:.3em;white-space:normal}.token.cdata,.token.comment,.token.doctype,.token.prolog{color:#708090}.token.punctuation{color:#f8f8f2}.token.namespace{opacity:.7}.token.constant,.token.deleted,.token.property,.token.symbol,.token.tag{color:#f92672}.token.boolean,.token.number{color:#ae81ff}.token.attr-name,.token.builtin,.token.char,.token.inserted,.token.selector,.token.string{color:#a6e22e}.language-css .token.string,.style .token.string,.token.entity,.token.operator,.token.url,.token.variable{color:#f8f8f2}.token.atrule,.token.attr-value,.token.class-name,.token.function{color:#e6db74}.token.keyword{color:#66d9ef}.token.important,.token.regex{color:#fd971f}.token.bold,.token.important{font-weight:700}.token.italic{font-style:italic}.token.entity{cursor:help}.layout-module--container--zLeA4>header{margin-bottom:1.5rem}.layout-module--hidden--5UP4l{opacity:0}@media (min-width:55em){.layout-module--container--zLeA4{display:grid;grid-column-gap:2.9em;grid-template-columns:13.05em 2fr}.layout-module--container--zLeA4>nav{grid-column:1/2}.layout-module--container--zLeA4>main{grid-column:2/3}}.layout-module--versionDropdown--1WVa5{display:flex;align-items:flex-start}header{--header-background-color:#fff;--input-background-color:#eee;display:flex;background-color:var(--header-background-color);color:#fff;position:-webkit-sticky;position:sticky;z-index:1;top:0;border-bottom:3px solid #fff}header h1{grid-column:2/3;grid-row:1/2;color:inherit;margin:0;font-size:1.125rem;align-self:center;text-align:right}@media (min-width:55em){header{grid-template-columns:13.05em auto -webkit-max-content;grid-template-columns:13.05em auto max-content;grid-column-gap:2.9em}header h1{text-align:left}}header>.search{display:grid;grid-template-rows:auto 1fr;max-height:100vh;grid-column:1/3;grid-row:1/2;--whitespace:1.25rem;width:100%;position:relative;z-index:1}header>.search .input{background-color:var(--header-background-color);color:#fff;display:grid}header>.search .input input{display:block;box-sizing:border-box;width:100%;border:0;outline:none;background:var(--input-background-color);padding:.1rem var(--whitespace);grid-row:1/-1;grid-column:1/-1}header .icon-search{fill:currentColor;grid-row:1/-1;grid-column:1/-1;align-self:center;margin-left:.3rem;width:1em;height:1em;font-size:.6em;color:#000;position:relative;z-index:1}header>.search .input input::-webkit-input-placeholder{color:#000}header>.search .input input:-ms-input-placeholder{color:#000}header>.search .input input::-ms-input-placeholder{color:#000}header>.search .input input::placeholder{color:#000}header>.search .results{overflow-y:auto;margin:0;background:#fff;color:#000;list-style:none;padding:0 var(--whitespace);width:100%}header>.search .results li:first-child{padding-top:var(--whitespace)}header>.search .results li:last-child{padding-bottom:var(--whitespace);margin-bottom:0;border-bottom:3px solid #eee}header>.search a{color:inherit;background:none;display:block}header>.search a:focus,header>.search a:hover{text-decoration:underline}header>button{grid-row:1/2;grid-column:-2/-1;background:transparent;color:#ddd;border:0;padding:0 1rem;cursor:pointer;height:2rem}header>button:active,header>button:focus,header>button:hover{color:#1ca086}table{table-layout:fixed}@media (min-width:55em){header>.search{grid-column:1/-1}header button{display:none!important}}header>button>svg{fill:currentColor;vertical-align:middle}main :not(pre)>code[class*=language-]{color:#000;padding:.2em .4em;border-radius:3px;white-space:normal;background:rgba(27,31,35,.05);text-shadow:none;font-size:85%;overflow-wrap:break-word;word-break:break-word}.api-module--container--3kcA-{--description-background-color:#fff;--code-background-color:#191a18;--code-foreground-color:#fff;padding:1.25rem 1rem}.api-module--table--orE2T{max-width:100%;overflow-x:auto}main [id]:before{display:block;content:" ";margin-top:-5rem;height:5rem;visibility:hidden}main h2:first-child{margin-top:0}.api-module--container--3kcA- pre{background-color:var(--code-background-color);color:var(--code-foreground-color);padding:.725em 1.45em;width:100%;overflow-x:auto}@media (min-width:55em){.api-module--container--3kcA-{padding:0}main{--description-background-color:#fff;--code-background-color:#0a0b09;--code-foreground-color:#fff;background-image:-webkit-gradient(linear,left top,right top,from(var(--description-background-color)),color-stop(50%,var(--description-background-color)),color-stop(50%,var(--code-background-color)),to(var(--code-background-color)));background-image:linear-gradient(90deg,var(--description-background-color),var(--description-background-color) 50%,var(--code-background-color) 0,var(--code-background-color))}.api-module--section--1E1xV{display:grid;grid-template-columns:1fr 1fr;grid-column-gap:2.9em}.api-module--section--1E1xV>:not([data-language]){max-width:100%;overflow-x:auto;overflow-y:hidden;grid-column:1/2;padding-bottom:.11rem}.api-module--section--1E1xV>[data-language]{overflow-x:auto;grid-column:2/3;background-color:var(--code-background-color);color:var(--code-foreground-color)}.api-module--section--1E1xV>[data-language] pre{margin:0;padding:0}}.api-module--nav--1hEWA{position:-webkit-sticky;position:sticky;top:2rem;background-color:#eee;padding:0;max-height:calc(100vh - 2rem);overflow-y:auto}.api-module--nav--1hEWA h1{display:inline}.api-module--nav--1hEWA button{display:block;margin-bottom:.75em}.api-module--nav--1hEWA a:not(:hover):not(:active):not(:focus){color:inherit}.api-module--nav--1hEWA a{text-shadow:none;background-image:none;text-decoration:none;display:block}.api-module--nav--1hEWA>ol{padding:1rem!important}.api-module--nav--1hEWA li,.api-module--nav--1hEWA ol{list-style:none;margin-left:0;padding-left:0}.api-module--nav--1hEWA li li{font-size:.875em}.api-module--subhidden--tmTLp{display:none!important}.api-module--activelink--JBQ4j{position:-webkit-sticky;position:sticky;top:0;display:block;background-color:#fff;border-bottom:1px solid rgba(0,0,0,.12)}.api-module--activemenuitem--3O5Ag{font-weight:700}.api-module--deprecated--30wEb{background-color:#ffe7e8;padding:1.25rem;border-radius:.25rem;margin-bottom:1rem}@media (max-width:55em){.api-module--hidden--2sqxv{display:none!important}}</style><meta name="generator" content="Gatsby 2.19.18"/><title data-react-helmet="true">octokit/rest.js</title><meta data-react-helmet="true" charSet="utf-8"/><link as="script" rel="preload" href="/rest.js/webpack-runtime-2e5b510ee236d8c74ee0.js"/><link as="script" rel="preload" href="/rest.js/app-d97465ce9e8dfd6e1f85.js"/><link as="script" rel="preload" href="/rest.js/styles-dfac8586ef4dc508416a.js"/><link as="script" rel="preload" href="/rest.js/commons-efaf3e7d294631585567.js"/><link as="script" rel="preload" href="/rest.js/component---src-components-template-js-4c14f242787a5737e3ca.js"/><link as="fetch" rel="preload" href="/rest.js/page-data/v17/page-data.json" crossorigin="anonymous"/></head><body><div id="___gatsby"><div style="outline:none" tabindex="-1" id="gatsby-focus-wrapper"><div><header><div><select><option value="v18">Current (v18)</option><option value="v16">v16</option><option selected="" value="v17">v17</option></select></div><div class="search inactive"><label class="input"><svg aria-label="Search" class="icon-search" xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 16 16"><title>Search</title><path d="M15.7 13.3l-3.81-3.83A5.93 5.93 0 0 0 13 6c0-3.31-2.69-6-6-6S1 2.69 1 6s2.69 6 6 6c1.3 0 2.48-.41 3.47-1.11l3.83 3.81c.19.2.45.3.7.3.25 0 .52-.09.7-.3a.996.996 0 0 0 0-1.41v.01zM7 10.7c-2.59 0-4.7-2.11-4.7-4.7 0-2.59 2.11-4.7 4.7-4.7 2.59 0 4.7 2.11 4.7 4.7 0 2.59-2.11 4.7-4.7 4.7z"></path></svg><input type="search" value="" placeholder="search"/></label><ul class="results"></ul></div><button type="button"><svg aria-label="Menu" class="icon-menu" xmlns="http://www.w3.org/2000/svg" width="12" height="16" viewBox="0 0 12 16"><title>Menu</title><path d="M11.41 9H.59C0 9 0 8.59 0 8c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zm0-4H.59C0 5 0 4.59 0 4c0-.59 0-1 .59-1H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1h.01zM.59 11H11.4c.59 0 .59.41.59 1 0 .59 0 1-.59 1H.59C0 13 0 12.59 0 12c0-.59 0-1 .59-1z"></path></svg></button></header><div class="layout-module--container--zLeA4"><nav class="api-module--nav--1hEWA"><ol class="api-module--hidden--2sqxv"><li><a href="#usage">Usage</a></li><li><a href="#authentication">Authentication</a></li><li><a href="#previews">Previews</a></li><li><a href="#request-formats-aborts">Request formats &amp; aborts</a></li><li><a href="#custom-requests">Custom requests</a></li><li><a href="#pagination">Pagination</a></li><li><a href="#hooks">Hooks</a></li><li><a href="#custom-endpoint-methods">Custom endpoint methods</a></li><li><a href="#plugins">Plugins</a></li><li><a href="#throttling">Throttling</a></li><li><a href="#automatic-retries">Automatic retries</a></li><li><a href="#logging">Logging</a></li><li><a href="#debug">Debug</a></li></ol></nav><main class="api-module--container--3kcA-"><h1>octokit/rest.js</h1><h2 id="usage">Usage</h2><div class="api-module--section--1E1xV"><p>Import the Octokit constructor based on your platform.</p>
<h3>Browsers</h3>
<div>
Load <code>@octokit/rest</code> directly from <a href="https://cdn.pika.dev">cdn.pika.dev</a>
<div class="gatsby-highlight" data-language="html"><pre class="language-html"><code class="language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>script</span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>module<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token script"><span class="token language-javascript">
  <span class="token keyword">import</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"https://cdn.pika.dev/@octokit/rest"</span><span class="token punctuation">;</span>
</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>script</span><span class="token punctuation">></span></span></code></pre></div>
</div>
<hr />
<h3>Node</h3>
<div>
Install with <code>npm install @octokit/rest</code>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// or: import { Octokit } from "@octokit/rest";</span></code></pre></div>
</div>
<hr />
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Now instantiate your octokit API. All options are optional, but authentication is strongly encouraged.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Octokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span></code></pre></div>
<p>You can set <code class="language-text">auth</code> to a personal access token string.</p>
<p>Learn more about <a href="#authentication">authentication</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  auth<span class="token operator">:</span> <span class="token string">"secret123"</span><span class="token punctuation">,</span></code></pre></div>
<p>Setting a user agent <a href="https://developer.github.com/v3/#user-agent-required">is required</a>. It defaults to <code class="language-text">octokit/rest.js v1.2.3</code> where <code class="language-text">v1.2.3</code> is the current version of <code class="language-text">@octokit/rest</code>, but you should set it to something that identifies your app or script.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  userAgent<span class="token operator">:</span> <span class="token string">'myApp v1.2.3'</span><span class="token punctuation">,</span></code></pre></div>
<p>API Previews can be enabled globally by setting the <code class="language-text">previews</code> option. They can be set per-request as well.</p>
<p>Learn more about <a href="#previews">API Previews</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  previews<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">'jean-grey'</span><span class="token punctuation">,</span> <span class="token string">'symmetra'</span><span class="token punctuation">]</span><span class="token punctuation">,</span></code></pre></div>
<p>A default time zone can be enabled by setting the <code class="language-text">timeZone</code> option.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  timeZone<span class="token operator">:</span> <span class="token string">'Europe/Amsterdam'</span><span class="token punctuation">,</span></code></pre></div>
<p>Learn more about <a href="https://developer.github.com/v3/#using-the-time-zone-header">using time zones with the GitHub API</a>.</p>
<p>In order to use Octokit with GitHub Enterprise, set the <code class="language-text">baseUrl</code> option.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  baseUrl<span class="token operator">:</span> <span class="token string">'https://api.github.com'</span><span class="token punctuation">,</span></code></pre></div>
<p>For custom logging, pass an object with <code class="language-text">debug</code>, <code class="language-text">info</code>, <code class="language-text">warn</code> and <code class="language-text">error</code> methods as the <code class="language-text">log</code> option.</p>
<p>Learn more about <a href="#logging">logging</a> and <a href="#debug">debugging</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  log<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">debug</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">info</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
    warn<span class="token operator">:</span> console<span class="token punctuation">.</span>warn<span class="token punctuation">,</span>
    error<span class="token operator">:</span> console<span class="token punctuation">.</span>error
  <span class="token punctuation">}</span><span class="token punctuation">,</span></code></pre></div>
<p>Custom request options can be passed as <code class="language-text">request.*</code> options. See <a href="https://www.npmjs.com/package/@octokit/request#octokitrequest"><code class="language-text">@octokit/request</code></a> options. The same options can be passed to each endpoint request method.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  request<span class="token operator">:</span> <span class="token punctuation">{</span>
    agent<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    fetch<span class="token operator">:</span> <span class="token keyword">undefined</span><span class="token punctuation">,</span>
    timeout<span class="token operator">:</span> <span class="token number">0</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>Most of GitHub’s REST API endpoints have matching methods. All endpoint methods are asynchronous, in order to use <code class="language-text">await</code> in the code examples, we wrap them into an anonymous async function.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span></code></pre></div>
<p>For example to retrieve a pull request, use <a href="#octokit-routes-pulls-get"><code class="language-text">octokit.pulls.get()</code></a>. We recommend to use the search above to find the endpoint method you are looking for</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> pullRequest <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span>pulls<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  pull_number<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Some API endpoints support alternative response formats, see <a href="https://developer.github.com/v3/media/">Media types</a>. For example, to <a href="https://developer.github.com/v3/media/#diff">request the above pull request in a diff format</a>, pass the <code class="language-text">mediaType.format</code> option.</p>
<p>Learn more about <a href="#request-formats">request formats</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> diff <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span>pulls<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  pull_number<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
  mediaType<span class="token operator">:</span> <span class="token punctuation">{</span>
    format<span class="token operator">:</span> <span class="token string">"diff"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>For the API endpoints that do not have a matching method, such as the <a href="https://developer.github.com/v3/#root-endpoint">root endpoint</a> or legacy endpoints, you can send custom requests.</p>
<p>Learn more about <a href="#custom-requests">custom requests</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> root <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"GET /"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>You can also register custom endpoint methods, which is particularly useful if you participate in a private beta.</p>
<p>Learn more about <a href="#custom-endpoint-methods">custom endpoint methods</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">await</span> octokit<span class="token punctuation">.</span><span class="token function">registerEndpoints</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  misc<span class="token operator">:</span> <span class="token punctuation">{</span>
    getRoot<span class="token operator">:</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Some endpoints return a list which has to be paginated in order to retrieve the complete data set.</p>
<p>Learn more about <a href="#pagination">pagination</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">  octokit<span class="token punctuation">.</span><span class="token function">paginate</span><span class="token punctuation">(</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span>listForRepo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    owner<span class="token operator">:</span> <span class="token string">'octokit'</span><span class="token punctuation">,</span>
    repo<span class="token operator">:</span> <span class="token string">'rest.js'</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">issues</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// issues is an array of all issue objects</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span></code></pre></div>
<p>You can add more functionality with plugins. We recommend the retry and throttling plugins.</p>
<p>Learn more about <a href="#throttling">throttling</a>, <a href="#automatic-retries">automatic retries</a> and building your own <a href="#plugins">Plugins</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">import</span> <span class="token punctuation">{</span> retry <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@octokit/plugin-retry"</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> throttling <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">"@octokit/plugin-throttling"</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> MyOctokit <span class="token operator">=</span> Octokit<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>retry<span class="token punctuation">,</span> throttling<span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">Octokit.plugin()</code> returns a new constructor. The same options can be passed to the constructor. The options are passed on to all plugin functions as the 2nd argument.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> myOctokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyOctokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  auth<span class="token operator">:</span> <span class="token string">"secret123"</span><span class="token punctuation">,</span>
  throttle<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onRateLimit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">retryAfter<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      myOctokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Request quota exhausted for request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>request<span class="token punctuation">.</span>retryCount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// only retries once</span>
        myOctokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Retrying after </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>retryAfter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> seconds!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onAbuseLimit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">retryAfter<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// does not retry, only logs a warning</span>
      myOctokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Abuse detected for request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  retry<span class="token operator">:</span> <span class="token punctuation">{</span>
    doNotRetry<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"429"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h2 id="authentication">Authentication</h2><div class="api-module--section--1E1xV"><p>Authentication is optional for some REST API endpoints accessing public data, but is required for GraphQL queries. Using authentication also increases your <a href="https://developer.github.com/v3/#rate-limiting">API rate limit</a>.</p>
<p>By default, Octokit authenticates using the <a href="https://github.com/octokit/auth-token.js">token authentication strategy</a>. Pass in a token using <code class="language-text">options.auth</code>. It can be a personal access token, an OAuth token, an installation access token or a JSON Web Token for GitHub App authentication. The <code class="language-text">Authorization</code> header will be set according to the type of token.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Octokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  auth<span class="token operator">:</span> <span class="token string">"mypersonalaccesstoken123"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"/user"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>To use a different authentication strategy, set <code class="language-text">options.authStrategy</code>. The officially supported authentication strategies are listed on the <a href="https://github.com/octokit/auth-app.js#readme"><code class="language-text">@octokit/auth</code> README</a>.</p>
<p>Here is an example for GitHub App authentication</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> createAppAuth <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/auth-app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> appOctokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Octokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  authStrategy<span class="token operator">:</span> createAppAuth<span class="token punctuation">,</span>
  auth<span class="token operator">:</span> <span class="token punctuation">{</span>
    id<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
    privateKey<span class="token operator">:</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">PRIVATE_KEY</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> <span class="token punctuation">{</span> data <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> appOctokit<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"/app"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The <code class="language-text">.auth()</code> method returned by the current authentication strategy can be accessed at <code class="language-text">octokit.auth()</code>. Example</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> token <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> appOctokit<span class="token punctuation">.</span><span class="token function">auth</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  type<span class="token operator">:</span> <span class="token string">"installation"</span><span class="token punctuation">,</span>
  installationId<span class="token operator">:</span> <span class="token number">123</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h2 id="previews">Previews</h2><div class="api-module--section--1E1xV"><p>To enable any of <a href="https://developer.github.com/v3/previews/">GitHub’s API Previews</a>,
pass the <code class="language-text">previews</code> option to the GitHub constructor</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Octokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  previews<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"mercy-preview"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Previews can also be enabled for a single request by passing the <code class="language-text">mediaType.preview</code> option</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span>
  data<span class="token operator">:</span> <span class="token punctuation">{</span> topics <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span>repos<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  mediaType<span class="token operator">:</span> <span class="token punctuation">{</span>
    previews<span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"symmetra"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h2 id="request-formats-aborts">Request formats &amp; aborts</h2><div class="api-module--section--1E1xV"><p>Some API endpoints support alternative response formats, see <a href="https://developer.github.com/v3/media/">Media types</a>.</p>
<p>For example, to request a <a href="https://developer.github.com/v3/media/#diff">pull request as diff format</a>, set the <code class="language-text">mediaType.format</code> option</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> prDiff <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span>pulls<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  pull_number<span class="token operator">:</span> <span class="token number">1278</span><span class="token punctuation">,</span>
  mediaType<span class="token operator">:</span> <span class="token punctuation">{</span>
    format<span class="token operator">:</span> <span class="token string">"diff"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortController">AbortController</a> interface can be used to abort one or more requests as and when desired. When the request is initiated, an <a href="https://developer.mozilla.org/en-US/docs/Web/API/AbortSignal">AbortSignal</a> instance can be passed as an option inside the request's options object. For usage in Node, the <a href="https://github.com/mysticatea/abort-controller"><code class="language-text">abort-controller</code></a> package can be used.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> controller <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">AbortController</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> data<span class="token operator">:</span> prDiff <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token keyword">await</span> octokit<span class="token punctuation">.</span>pulls<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  pull_number<span class="token operator">:</span> <span class="token number">1278</span><span class="token punctuation">,</span>
  request<span class="token operator">:</span> <span class="token punctuation">{</span>
    signal<span class="token operator">:</span> controller<span class="token punctuation">.</span>signal<span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Use <code class="language-text">controller.abort()</code> to abort the request when desired.</p></div><h2 id="custom-requests">Custom requests</h2><div class="api-module--section--1E1xV"><p>To send custom requests you can use the lower-level <code class="language-text">octokit.request()</code> method</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"GET /"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>The <code class="language-text">baseUrl</code>, headers and other defaults are already set. For more information on the <code class="language-text">octokit.request()</code> API see <a href="https://github.com/octokit/request.js/"><code class="language-text">octokit/request.js</code></a></p>
<p>All the endpoint methods such as <code class="language-text">octokit.repos.get()</code> are aliases of <code class="language-text">octokit.request()</code> with pre-bound default options. So you can use the <code class="language-text">@octokit/request</code> API to get the default options or get generic request option to use with your preferred request library.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> defaultOptions <span class="token operator">=</span> octokit<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>get<span class="token punctuation">.</span>endpoint<span class="token punctuation">.</span><span class="token constant">DEFAULTS</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> requestOptions <span class="token operator">=</span> octokit<span class="token punctuation">.</span>repos<span class="token punctuation">.</span>get<span class="token punctuation">.</span><span class="token function">endpoint</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>Note that authentication is not applied when retrieving request options from the <code class="language-text">*.endpoint</code> APIs.</p></div><h2 id="pagination">Pagination</h2><div class="api-module--section--1E1xV"><p>All endpoint methods starting with <code class="language-text">.list*</code> do not return all results at once but instead return the first 30 items by default, see also <a href="https://developer.github.com/v3/#pagination">GitHub’s REST API pagination documentation</a>.</p>
<p>To automatically receive all results across all pages, you can use the <code class="language-text">octokit.paginate()</code> method:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit
  <span class="token punctuation">.</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token string">"GET /repos/:owner/:repo/issues"</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
    owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
    repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">issues</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// issues is an array of all issue objects. It is not wrapped in a { data, headers, status, url } object</span>
    <span class="token comment">// like results from `octokit.request()` or any of the endpoint methods such as `octokit.issues.listForRepo()`</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">octokit.paginate()</code> accepts the same options as <a href="#custom-requests"><code class="language-text">octokit.request()</code></a>. You can optionally pass an additional function to map the results from each response. The map must return a new value, usually an array with mapped data.</p>
<p><strong>Note:</strong> the map function is called with the <code class="language-text">{ data, headers, status, url }</code> response object. The <code class="language-text">data</code> property is guaranteed to be an array of the result items, even for list endpoints that respond with an object instead of an array, such as the <a href="https://developer.github.com/v3/search/#example">search endpoints</a>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit
  <span class="token punctuation">.</span><span class="token function">paginate</span><span class="token punctuation">(</span>
    <span class="token string">"GET /repos/:owner/:repo/issues"</span><span class="token punctuation">,</span>
    <span class="token punctuation">{</span> owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span> repo<span class="token operator">:</span> <span class="token string">"rest.js"</span> <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">(</span><span class="token parameter">response</span><span class="token punctuation">)</span> <span class="token operator">=></span> response<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">issue</span><span class="token punctuation">)</span> <span class="token operator">=></span> issue<span class="token punctuation">.</span>title<span class="token punctuation">)</span>
  <span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">issueTitles</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// issueTitles is now an array with the titles only</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>To stop paginating early, you can call the <code class="language-text">done()</code> function passed as 2nd argument to the response map function. Note that you still have to return the value you want to map the response to, otherwise the last response will be mapped to undefined.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit<span class="token punctuation">.</span><span class="token function">paginate</span><span class="token punctuation">(</span><span class="token string">"GET /organizations"</span><span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> done</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>response<span class="token punctuation">.</span>data<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">issues</span><span class="token punctuation">)</span> <span class="token operator">=></span> issue<span class="token punctuation">.</span>body<span class="token punctuation">.</span><span class="token function">includes</span><span class="token punctuation">(</span><span class="token string">"something"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">done</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> response<span class="token punctuation">.</span>data<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>To paginate responses for one of the registered endpoint methods such as <code class="language-text">octokit.issues.listForRepo()</code> you can pass the method directly as first argument to <code class="language-text">octokit.paginate</code>:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit
  <span class="token punctuation">.</span><span class="token function">paginate</span><span class="token punctuation">(</span>octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span>listForRepo<span class="token punctuation">,</span> <span class="token punctuation">{</span>
    owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
    repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">issues</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token comment">// issues is an array of all issue objects</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>If your runtime environment supports async iterators (such as most modern browsers and Node 10+), you can iterate through each response</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">for</span> <span class="token keyword">await</span> <span class="token punctuation">(</span><span class="token keyword">const</span> response <span class="token keyword">of</span> octokit<span class="token punctuation">.</span>paginate<span class="token punctuation">.</span><span class="token function">iterator</span><span class="token punctuation">(</span>
  octokit<span class="token punctuation">.</span>issues<span class="token punctuation">.</span>listForRepo<span class="token punctuation">,</span>
  <span class="token punctuation">{</span>
    owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
    repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment">// do whatever you want with each response, break out of the loop, etc.</span>
<span class="token punctuation">}</span></code></pre></div>
<p><code class="language-text">octokit.paginate.iterator()</code> accepts the same options as <code class="language-text">octokit.paginate()</code>.</p></div><h2 id="hooks">Hooks</h2><div class="api-module--section--1E1xV"><p>You can customize Octokit’s request lifecycle with hooks. Available methods are</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit<span class="token punctuation">.</span>hook<span class="token punctuation">.</span><span class="token function">before</span><span class="token punctuation">(</span><span class="token string">"request"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token function">validate</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
octokit<span class="token punctuation">.</span>hook<span class="token punctuation">.</span><span class="token function">after</span><span class="token punctuation">(</span><span class="token string">"request"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">response<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">: </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
octokit<span class="token punctuation">.</span>hook<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span><span class="token string">"request"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">error<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>error<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token number">304</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token function">findInCache</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>headers<span class="token punctuation">.</span>etag<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">throw</span> error<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
octokit<span class="token punctuation">.</span>hook<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">"request"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// add logic before, after, catch errors or replace the request altogether</span>
  <span class="token keyword">return</span> <span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>See <a href="https://github.com/gr2m/before-after-hook#hookcollectionapi">before-after-hook</a> for more details on the 4 methods.</p></div><h2 id="custom-endpoint-methods">Custom endpoint methods</h2><div class="api-module--section--1E1xV"><p><strong>Note</strong>: <code class="language-text">octokit.registerEndpoints()</code> has been deprecated.</p>
<p>Instead of</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">await</span> octokit<span class="token punctuation">.</span><span class="token function">registerEndpoints</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  misc<span class="token operator">:</span> <span class="token punctuation">{</span>
    getRoot<span class="token operator">:</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>do</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span>octokit<span class="token punctuation">.</span>misc<span class="token punctuation">,</span> <span class="token punctuation">{</span>
  getRoot<span class="token operator">:</span> octokit<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
    method<span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span>
    url<span class="token operator">:</span> <span class="token string">"/"</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>If you use <code class="language-text">octokit.registerEndpoints()</code> in a plugin, return an object instead:</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">function</span> <span class="token function">myPlugin</span><span class="token punctuation">(</span><span class="token parameter">octokit<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    misc<span class="token operator">:</span> <span class="token punctuation">{</span>
      octokit<span class="token punctuation">.</span>request<span class="token punctuation">.</span><span class="token function">defaults</span><span class="token punctuation">(</span><span class="token punctuation">{</span> method<span class="token operator">:</span> <span class="token string">"GET"</span><span class="token punctuation">,</span> url<span class="token operator">:</span> <span class="token string">"/"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span></code></pre></div>
<hr>
<p>You can register custom endpoint methods such as <code class="language-text">octokit.repos.get()</code> using the <code class="language-text">octokit.registerEndpoints(routes)</code> method</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js">octokit<span class="token punctuation">.</span><span class="token function">registerEndpoints</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  foo<span class="token operator">:</span> <span class="token punctuation">{</span>
    bar<span class="token operator">:</span> <span class="token punctuation">{</span>
      method<span class="token operator">:</span> <span class="token string">"PATCH"</span><span class="token punctuation">,</span>
      url<span class="token operator">:</span> <span class="token string">"/repos/:owner/:repo/foo"</span><span class="token punctuation">,</span>
      headers<span class="token operator">:</span> <span class="token punctuation">{</span>
        accept<span class="token operator">:</span> <span class="token string">"application/vnd.github.foo-bar-preview+json"</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      params<span class="token operator">:</span> <span class="token punctuation">{</span>
        owner<span class="token operator">:</span> <span class="token punctuation">{</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        repo<span class="token operator">:</span> <span class="token punctuation">{</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        baz<span class="token operator">:</span> <span class="token punctuation">{</span>
          required<span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
          type<span class="token operator">:</span> <span class="token string">"string"</span><span class="token punctuation">,</span>
          <span class="token keyword">enum</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token string">"qux"</span><span class="token punctuation">,</span> <span class="token string">"quux"</span><span class="token punctuation">,</span> <span class="token string">"quuz"</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

octokit<span class="token punctuation">.</span>foo<span class="token punctuation">.</span><span class="token function">bar</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  owner<span class="token operator">:</span> <span class="token string">"octokit"</span><span class="token punctuation">,</span>
  repo<span class="token operator">:</span> <span class="token string">"rest.js"</span><span class="token punctuation">,</span>
  baz<span class="token operator">:</span> <span class="token string">"quz"</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This is useful when you participate in private beta features and prefer the convenience of methods for the new endpoints instead of using <a href="#custom-requests"><code class="language-text">octokit.request()</code></a>.</p></div><h2 id="plugins">Plugins</h2><div class="api-module--section--1E1xV"><p>You can customize and extend Octokit’s functionality using plugins</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token comment">// index.js</span>
<span class="token keyword">const</span> Octokit <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MyOctokit <span class="token operator">=</span> Octokit<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"./lib/my-plugin"</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"octokit-plugin-example"</span><span class="token punctuation">)</span>
<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// lib/my-plugin.js</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">(</span>octokit<span class="token punctuation">,</span> options <span class="token operator">=</span> <span class="token punctuation">{</span> greeting<span class="token operator">:</span> <span class="token string">"Hello"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
  <span class="token comment">// hook into the request lifecycle</span>
  octokit<span class="token punctuation">.</span>hook<span class="token punctuation">.</span><span class="token function">wrap</span><span class="token punctuation">(</span><span class="token string">"request"</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">request<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
    <span class="token keyword">const</span> time <span class="token operator">=</span> Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">const</span> response <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token function">request</span><span class="token punctuation">(</span>options<span class="token punctuation">)</span><span class="token punctuation">;</span>
    octokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span>
      <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> – </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>response<span class="token punctuation">.</span>status<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> in </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>
        Date<span class="token punctuation">.</span><span class="token function">now</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> time
      <span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">ms</span><span class="token template-punctuation string">`</span></span>
    <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">return</span> response<span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// add a custom method: octokit.helloWorld()</span>
  <span class="token keyword">return</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">helloWorld</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=></span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>greeting<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">, world!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span></code></pre></div>
<p><code class="language-text">.plugin</code> accepts a function or an array of functions.</p>
<p>We recommend using <a href="#logging">Octokit’s log methods</a> to help users of your plugin with debugging.</p>
<p>You can add new methods to the <code class="language-text">octokit</code> instance passed as the first argument to
the plugin function. The 2nd argument is the options object passed to the
constructor when instantiating the <code class="language-text">octokit</code> client.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyOctokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span> greeting<span class="token operator">:</span> <span class="token string">"Hola"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
octokit<span class="token punctuation">.</span><span class="token function">helloWorld</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">// Hola, world!</span></code></pre></div></div><h2 id="throttling">Throttling</h2><div class="api-module--section--1E1xV"><p>When you send too many requests in too little time you will likely hit errors due to rate and/or abuse limits.</p>
<p>In order to automatically throttle requests as recommended in <a href="https://developer.github.com/v3/guides/best-practices-for-integrators/">GitHub’s best practices for integrators</a>, we recommend you install the <a href="https://github.com/octokit/plugin-throttling.js"><code class="language-text">@octokit/plugin-throttling</code> plugin</a>.</p>
<p>The <code class="language-text">throttle.onAbuseLimit</code> and <code class="language-text">throttle.onRateLimit</code> options are required. Return <code class="language-text">true</code> to automatically retry the request after <code class="language-text">retryAfter</code> seconds.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> throttling <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/plugin-throttling"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MyOctokit <span class="token operator">=</span> Octokit<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>throttling<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyOctokit</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  auth<span class="token operator">:</span> <span class="token string">"token "</span> <span class="token operator">+</span> process<span class="token punctuation">.</span>env<span class="token punctuation">.</span><span class="token constant">TOKEN</span><span class="token punctuation">,</span>
  throttle<span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">onRateLimit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">retryAfter<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      octokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Request quota exhausted for request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">if</span> <span class="token punctuation">(</span>options<span class="token punctuation">.</span>request<span class="token punctuation">.</span>retryCount <span class="token operator">===</span> <span class="token number">0</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// only retries once</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Retrying after </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>retryAfter<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> seconds!</span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token function-variable function">onAbuseLimit</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter">retryAfter<span class="token punctuation">,</span> options</span><span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span>
      <span class="token comment">// does not retry, only logs a warning</span>
      octokit<span class="token punctuation">.</span>log<span class="token punctuation">.</span><span class="token function">warn</span><span class="token punctuation">(</span>
        <span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">Abuse detected for request </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>method<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string"> </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>options<span class="token punctuation">.</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token template-punctuation string">`</span></span>
      <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div></div><h2 id="automatic-retries">Automatic retries</h2><div class="api-module--section--1E1xV"><p>Many common request errors can be easily remediated by retrying the request. We recommend installing the <a href="https://github.com/octokit/plugin-retry.js"><code class="language-text">@octokit/plugin-retry</code> plugin</a> for Automatic retries in these cases</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> <span class="token punctuation">{</span> Octokit <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token punctuation">{</span> retry <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/plugin-retry"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> MyOctokit <span class="token operator">=</span> Octokit<span class="token punctuation">.</span><span class="token function">plugin</span><span class="token punctuation">(</span>retry<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MyOctokit</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token comment">// all requests sent with the `octokit` instance are now retried up to 3 times for recoverable errors.</span></code></pre></div></div><h2 id="logging">Logging</h2><div class="api-module--section--1E1xV"><p><code class="language-text">Octokit</code> has 4 built-in log methods</p>
<ol>
<li><code class="language-text">octokit.log.debug(message[, additionalInfo])</code></li>
<li><code class="language-text">octokit.log.info(message[, additionalInfo])</code></li>
<li><code class="language-text">octokit.log.warn(message[, additionalInfo])</code></li>
<li><code class="language-text">octokit.log.error(message[, additionalInfo])</code></li>
</ol>
<p>They can be configured using the <a href="client-options"><code class="language-text">log</code> client option</a>. By default, <code class="language-text">octokit.log.debug()</code> and <code class="language-text">octokit.log.info()</code> are no-ops, while the other two call <code class="language-text">console.warn()</code> and <code class="language-text">console.error()</code> respectively.</p>
<p>This is useful if you build reusable <a href="#plugins">plugins</a>.</p></div><h2 id="debug">Debug</h2><div class="api-module--section--1E1xV"><p>The simplest way to receive debug information is to set the <a href="client-options"><code class="language-text">log</code> client option</a> to <code class="language-text">console</code>.</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  log<span class="token operator">:</span> console<span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

octokit<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This will log</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">request { method: &#39;GET&#39;,
  baseUrl: &#39;https://api.github.com&#39;,
  headers:
   { accept: &#39;application/vnd.github.v3+json&#39;,
     &#39;user-agent&#39;:
      &#39;octokit.js/0.0.0-development Node.js/10.15.0 (macOS Mojave; x64)&#39; },
  request: {},
  url: &#39;/&#39; }
GET / - 200 in 514ms</code></pre></div>
<p>If you like to support a configurable log level, we recommend using the <a href="https://github.com/watson/console-log-level">console-log-level</a> module</p>
<div class="gatsby-highlight" data-language="js"><pre class="language-js"><code class="language-js"><span class="token keyword">const</span> octokit <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"@octokit/rest"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  log<span class="token operator">:</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">"console-log-level"</span><span class="token punctuation">)</span><span class="token punctuation">(</span><span class="token punctuation">{</span> level<span class="token operator">:</span> <span class="token string">"info"</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

octokit<span class="token punctuation">.</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></div>
<p>This will only log</p>
<div class="gatsby-highlight" data-language="text"><pre class="language-text"><code class="language-text">GET / - 200 in 514ms</code></pre></div></div></main></div></div></div></div><script id="gatsby-script-loader">/*<![CDATA[*/window.pagePath="/v17";/*]]>*/</script><script id="gatsby-chunk-mapping">/*<![CDATA[*/window.___chunkMapping={"app":["/app-d97465ce9e8dfd6e1f85.js"],"component---src-components-template-js":["/component---src-components-template-js-4c14f242787a5737e3ca.js"],"component---src-pages-index-js":["/component---src-pages-index-js-c9ba7906b6e0e1c6f12e.js"]};/*]]>*/</script><script src="/rest.js/component---src-components-template-js-4c14f242787a5737e3ca.js" async=""></script><script src="/rest.js/commons-efaf3e7d294631585567.js" async=""></script><script src="/rest.js/styles-dfac8586ef4dc508416a.js" async=""></script><script src="/rest.js/app-d97465ce9e8dfd6e1f85.js" async=""></script><script src="/rest.js/webpack-runtime-2e5b510ee236d8c74ee0.js" async=""></script></body></html>